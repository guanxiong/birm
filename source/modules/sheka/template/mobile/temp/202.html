<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
    <title>周年庆</title>
    <style>
        html
        {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        body
        {
            margin: 0;
            padding: 0;
            height: 100%;
            font-size: 14px;
            line-height: 1.3em;
        }
        
        #stage
        {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
            overflow: hidden;
            text-shadow: 1px 0px 1px #ffffff,-1px 0px 1px #ffffff,0px 1px 1px #ffffff,0px -1px 1px #ffffff;
        }
        
        #contentPanel
        {
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
            color: #000;
            font-weight: bold;
            z-index: 99;
        }
        
        #cardTo
        {
            position: absolute;
            top: 32%;
            left: 25%;
            opacity: 0;
        }
        #cardBody
        {
            position: absolute;
            top: 00%;
            left: 10%;
            width: 52%;
            visibility: hidden;
            overflow: hidden;
            height: auto;
            text-indent: 2em;
        }
        
        #cardFrom
        {
            position: absolute;
            top: 60%;
            left: 10%;
            opacity: 0;
        }
        
        #stage.bg
        {
            background-image: url("{$_W['attachurl']}{$data['cardbg']}");
            background-repeat: no-repeat;
            background-size: 100% 100%;
            z-index: 0;
        }
        .common
        {
            background: none;
            position: absolute;
            z-index: 1;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -o-user-select: none;
        }
        #split_Lines
        {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0%;
            top: 0%;
        }
        .imageStyle
        {
            opacity: 1;
            width: 6%;
            height: 6%;
        }  
        .ball
        {            
            background-repeat: no-repeat;
            background-size:100% 100%;
            position: absolute;
        }
        @-webkit-keyframes ballA {
        100%{left: 120%;top:-20%;}
        }
        @keyframes ballA {
        100%{left: 120%;top:-20%;}
        }
        @-moz-keyframes ballA {
        100%{left: 120%;top:-20%;}
        }
        @-webkit-keyframes ballB {
        100%{left: 20%;top:-20%;}
        }
        @keyframes ballB {
        100%{left: 20%;top:-20%;}
        }
        @-moz-keyframes ballB {
        100%{left: 20%;top:-20%;}
        }          
    </style><script type="text/javascript">var APP_PUBLIC = "./source/modules/sheka/";</script>
    <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
    <script src="./source/modules/sheka/js/jquery.transit.js"></script>
    <script src="./source/modules/sheka/js/txtanimatelibrary.js"></script>
    <link href="./source/modules/sheka/css/leaves.css" rel="stylesheet">
    <script src="./source/modules/sheka/js/common.js"></script>
          <script>
              function r(a, b) {
                  return a > b ? 0 : Math.round(Math.random() * (b - a) + a);
              }

              function startMove() {
                  $('.common').not(':animated').each(function () {
                      $(this).animate({
                          'top': r(70, 100) + "%",
                          'left': r(-5, 25) + "%",
                          '-webkit-transform': 'scale(' + r(3, 10) / 12 + ')',
                          'transform': 'scale(' + r(3, 10) / 12 + ')',
                          '-moz-transform': 'scale(' + r(3, 10) / 12 + ')'
                      }, r(3000, 8000));
                  });
              }

              function keepAni() {
                  var n = $(':animated').length;
                  var max_n = $('.common').length;
                  if (n <= max_n) startMove();
              }

              $(document).ready(function () {
                  for (var i = 0; i < 8; i++) {
                      var t_div = document.createElement("div");
                      $(t_div).addClass('common').css({
                          'top': r(70, 100) + "%",
                          'left': r(-5, 25) + "%",
                          '-webkit-transform': 'scale(' + r(3, 10) / 12 + ')',
                          'transform': 'scale(' + r(3, 10) / 12 + ')',
                          '-moz-transform': 'scale(' + r(3, 10) / 12 + ')'
                      }).html("\<img src=\""+APP_PUBLIC+"images/JN004/star.png\"\>");
                      $('#stage').append(t_div);
                  }
                  setInterval("keepAni()", '50');
              })
    </script>
    <script>
        function r(a, b) {
            return a > b ? 0 : Math.round(Math.random() * (b - a) + a);
        }
        $(function () {
            cardWaitReady();
            cardReplaceText();
            createbjMusic("{$_W['attachurl']}{$data['music']}");
            createball();
            setInterval("createball()", "12000");
            if (!$.support.transition) {
                $.fn.transition = $.fn.animate;
            }
            var txtCard = new CardAutoAnimation("#cardTo", "#cardBody", "#cardFrom", "#split_Lines");
            txtCard.anmitionLines({ type: "leftInShow", time: 1000, delay: 2000 }, { type: "floatBottomIn", time: 1000, delay: 2000 }, { type: "rightInShow", time: 1000, delay: 2000 }, function () {
                cardEndingSkip();
            })
        });
        function createball() {
            $(".ball").remove();
            var count = r(4, 7);
            for (var i = 0; i < count; i++) {
                var width = 10;
                var height = 3;
                var img = r(1, 4);
                var top = r(70, 120);
                var speed = r(7, 12);
                var left = -r(18, 20);
                var cssname = 'ballA ';
                if (i >= 3 && img != 1) {
                    left = r(105, 108);
                    cssname = 'ballB ';
                }
                width = img == 1 ? 10 : (img == 2 ? 12 : (img == 3 ? 11 : 8));
                height = img == 1 ? 10 : (img == 2 ? 14 : (img == 3 ? 13 : 10));
                var t_div = document.createElement("div");
                $(t_div).addClass('ball').css({
                    'background-image': 'url('+APP_PUBLIC+'images/JN004/ball' + img + '.png)',
                    'width': width + '%',
                    'height': height + '%',
                    'top': top + '%',
                    'left': left + '%',
                    '-webkit-animation': cssname + speed + 's linear',
                    'animation': cssname + speed + 's linear',
                    '-moz-animation': cssname + speed + 's linear',
                });
                $('#ball').append(t_div);
            }
        }
    </script>
</head>
<body>
    <div id="stage" class="bg">        
        <div id="ball"></div>
        <div id="contentPanel">
            <div id="cardTo">靓靓：</div>
            <div id="cardBody">  我没有五彩缤纷的鲜花，没有那些浪漫的诗句，没有贵那些重的礼物，没有那些兴奋的惊喜，只有一个轻轻的祝福，祝你生日快乐！有生之年，天天快乐！</div>
            <div id="cardFrom">婉如</div>
            <div id="split_Lines">
            </div>
        </div>
    </div>
</body>
</html>
