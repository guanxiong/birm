<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <title>生日快乐</title>
    <style>
        html
        {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        body
        {
            margin: 0;
            padding: 0;
            height: 100%;
            font-size: 12px;
            line-height: 1.3em;
        }

        #stage
        {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
        }

        #cardTo
        {
            visibility: hidden;

        }
        #cardBody
        {
            margin: 10px 0px;
            visibility: hidden;
            overflow: hidden;
            height: auto;
            text-indent: 2em;
        }

        #cardFrom
        {
            float: right;
            margin-right: 10px;
            visibility: hidden;

        }

        #stage.bg
        {
            background-image: url("{$_W['attachurl']}{$data['cardbg']}");
            background-repeat: no-repeat;
            background-size: 100% 100%;
            z-index: 0;
        }

        #contentPanel
        {
            position: absolute;
            top: 38%;
            left: 20%;
            width: 60%;
            height: 18%;
            color:#000;
            font-weight: bold;
            z-index: 99;
        }
    </style><script type="text/javascript">var APP_PUBLIC = "./source/modules/sheka/";</script>
    <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
    <script src="./source/modules/sheka/js/common.js"></script>
    <link href="../css/leaves.css" rel="stylesheet">
    <script>
        $(function () {
            waitReady();
            var cardToHeight = $("#cardTo").height();
            var cardFromHeight = $("#cardFrom").height();
            var panelHeight = $("#contentPanel").height();
            var cardBody = $("#cardBody");
            var lineheight = parseInt(cardBody.css("line-height"));

            var bodyHeight = panelHeight - cardToHeight - cardFromHeight;
            cardBody.css({ "max-height": parseInt(bodyHeight / lineheight) * lineheight + "px" });

            var speed = 250;
            var reg = new RegExp("\<[\/]?(|[a-z]|[A-Z])*\>","gim");
            var count = 0;
            cardBody.html().replace(reg, function(){count++;return arguments[0]});
            var time=(cardBody.html().replace(reg,"").length+count)*speed;
            var timeto=$("#cardTo").html().length*speed;
            $("body").delay(1000).show(function () {
                $("#cardTo").typewriter(speed);
            }).delay(timeto+2000).show(function () {
                        $("#cardBody").typewriter(speed);
                    }).delay(time+1000).show(function () {
                        $("#cardFrom").typewriter(speed);
                        $("#cardFrom").ShowSkip();
                    });
        });
    </script>
</head>
<body>
<script>CreateAudio("{$_W['attachurl']}{$data['music']}")</script>
<div id="stage" class="bg">
    <div id="contentPanel">
        <div id="cardTo">阳阳：</div>
        <div id="cardBody"> 时间很短，天涯很远，往后的一山一水，一朝一夕，自己安静地走完。倘若不慎走失迷途，跌入水中，也应该记得，有一条河流，叫重生。这世上任何地方，都可以生长；任何去处，都是归宿。那么，你别来找我，我亦不去寻你。守着剩下的流年，看一段岁月静好，现世安稳。</div>
        <div id="cardFrom">花花</div>
        <script type="text/javascript">
            ReplaceText();
        </script>
    </div>
</div>
</body>
</html>
