<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
    <title>拜访朋友</title>
    <style>
        #stage.bg
        {
            background-image: url("{$_W['attachurl']}{$data['cardbg']}");
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }
        html
        {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body
        {
            margin: 0;
            padding: 0;
            height: 100%;
            font-size: 14px;
            line-height: 1.3em;
        }

        #stage
        {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #cardTo
        {
            visibility: hidden;
        }

        #cardBody
        {
            margin: 10px 0px;
            text-indent: 36px;
            visibility: hidden;
            overflow: hidden;
            height: auto;
            overflow-y:scroll;
        }

        #cardFrom
        {
            float: right;
            margin-right: 10px;
            visibility: hidden;
        }

        #contentPanel
        {
            position: absolute;
            top: 25%;
            left: 15%;
            width: 70%;
            height: 24%;
            color: #000;
            font-weight: bold;
        }

        #flashStar
        {
            position: absolute;
            top: 0px;
            left: 0px;
            right: auto;
            bottom: auto;
            width: 100%;
            height: 100%;
            background-image: url("images/flashStar.png");
            background-repeat: no-repeat;
            background-size: 100% 100%;
            animation: flashstarAnimation 2s infinite;
            -webkit-animation: flashstarAnimation 2s infinite;
            -moz-animation: flashstarAnimation 2s linear infinite;
        }

        @keyframes flashstarAnimation
        {
            0%
            {
                opacity: 0.7;
            }

            50%
            {
                opacity: 2;
            }

            50%
            {
                opacity: 0.7;
            }
        }

        @-webkit-keyframes flashstarAnimation
        {
            0%
            {
                opacity: 0.5;
            }

            50%
            {
                opacity: 1;
            }

            50%
            {
                opacity: 0.5;
            }
        }

        @-moz-keyframes flashstarAnimation
        {
            0%
            {
                opacity: 0.5;
            }

            50%
            {
                opacity: 1;
            }

            50%
            {
                opacity: 0.5;
            }
        }
    </style><script type="text/javascript">var APP_PUBLIC = "./source/modules/sheka/";</script>
    <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
    <script src="./source/modules/sheka/js/common.js"></script>
    <script>
        $(function () {
            waitReady();

            var cardtoHeight = $("#cardTo").height();
            var cardFromHeight = $("#cardFrom").height();
            var panelHeight = $("#contentPanel").height();
            var cardBody = $("#cardBody");
            var lineheight = parseInt(cardBody.css("line-height"));

            var bodyHeight = panelHeight - cardtoHeight - cardFromHeight;
            cardBody.css("max-height", parseInt(bodyHeight / lineheight) * lineheight + "px");

            var speed = 200;
            var time = cardBody.html().length * speed;
			 var timeto = $("#cardTo").html().length * speed;
            $("body").delay(1000).show(function () {
                $("#cardTo").typewriter(speed);
            }).delay(timeto+2000).show(function () {
                cardBody.typewriter(speed);
            }).delay(time + 1500).show(function () {
                var cfrom = $("#cardFrom");
                cfrom.typewriter(speed);
                cfrom.ShowSkip();
            });
        });
    </script>
</head>
<body>
<script>CreateAudio("{$_W['attachurl']}{$data['music']}");</script>
    <div id="stage" class="bg">
        <div id="flashStar"></div>

        <div id="contentPanel">
            <div id="cardTo">亲爱的明珠：</div>
            <div id="cardBody"> 不管昨天，今天还是明天，能豁然开朗就是美好的一天；不管亲情，友情还是爱情，能永远珍惜就是好感情；不管周一，周二……还是周末，天天轻松就是幸福的日子。所以送上为你定制的短信，里面装着从星期一到星期天的好运与快乐，愿你周末快乐，周而复始！</div>
            <div id="cardFrom">斌斌</div>
            <script type="text/javascript">
                ReplaceText();
            </script>
        </div>
    </div>
</body>
</html>
